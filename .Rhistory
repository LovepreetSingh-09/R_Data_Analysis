ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy,alpha=drv,size=drv))
# For the color intensity
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy,alpha=drv,,color=class))
# For the color intensity
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy,alpha=drv))
ggplot(data = mpg) +
geom_point(
mapping = aes(x = displ, y = hwy, color = "blue")
)
ggplot(data = mpg) +
geom_point(
mapping = aes(x = displ, y = hwy, color = "red")
)
ggplot(data = mpg) +
geom_point(
mapping = aes(x = displ, y = hwy)
)
ggplot(data = mpg) +
geom_point(
mapping = aes(x = displ, y = hwy,color)
)
ggplot(data = mpg) +
geom_point(
mapping = aes(x = displ, y = hwy,color='')
)
# Default color after declaring only is red
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,color='yellow'))
# Default color after declaring is red
ggplot(data = mpg) + geom_point(mapping = aes(x = displ, y = hwy,color=c('yellow','blue'))
# Facets - facet_wrap()  and  facet_grid()
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy))+facet_wrap(~class,nrow=2)
# Facets - facet_wrap()  and  facet_grid()
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy))+facet_wrap(~class,nrow=2)
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy))+facet_grid(drv~cyl)
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy))+facet_grid(drv~.)
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy))+facet_grid(.~drv)
# Geometric Objects :
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy,color=class))
ggplot(data=mpg)+geom_smooth(mapping=aes(x=displ,y=hwy,color=class))
ggplot(data=mpg)+geom_smooth(mapping=aes(x=displ,y=hwy))
ggplot(data=mpg)+geom_smooth(mapping=aes(x=displ,y=hwy,linetype=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+geom_smooth(aes(x=displ,y=hwy,linestylr=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+geom_smooth(aes(x=displ,y=hwy,linestyle=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+geom_smooth(aes(x=displ,y=hwy,linestyle=drv,color=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+geom_smooth(aes(x=displ,y=hwy,linetype=drv,color=drv))
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
geom_point(mapping = aes(color = class)) +
geom_smooth()
ggplot(data=mpg,mapping=aes(x=displ,y=hwy))+
geom_point(mapping=aes(color=class))+
geom_smooth(data=filter(mpg,class='subcompact'),se=FALSE)
ggplot(data=mpg,mapping=aes(x=displ,y=hwy))+
geom_point(mapping=aes(color=class))+
geom_smooth(data=filter(mpg,class='subcompact'),se=FALSE)
ggplot(data=mpg,mapping=aes(x=displ,y=hwy))+
geom_point(mapping=aes(color=class))+
geom_smooth(data=filter(mpg,class=='subcompact'),se=FALSE)
ggplot(data=mpg,mapping=aes(x=displ,y=hwy))+
geom_point(mapping=aes(color=class))+
geom_smooth(data=filter(mpg,class=='subcompact'),se=TRUE)
ggplot(data=mpg)+geom_smooth(mapping=aes(x=displ,y=hwy,linetype=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+
geom_smooth(aes(x=displ,y=hwy,linetype=drv,color=drv))
# Using glaobal assignment for mapping , then local assignment can overwrite and update the mapping
ggplot(data = mpg, mapping = aes(x = displ, y = hwy)) +
geom_point(mapping = aes(color = class)) +
geom_smooth()
# se means the standard deviation or greyish region around the smooth line
ggplot(data=mpg,mapping=aes(x=displ,y=hwy))+
geom_point(mapping=aes(color=class))+
geom_smooth(data=filter(mpg,class=='subcompact'),se=TRUE)
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+
geom_smooth(aes(x=displ,y=hwy,linetype=drv,group=drv))
ggplot(data=mpg)+geom_point(aes(x=displ,y=hwy,color=drv))+
geom_smooth(aes(x=displ,y=hwy,group=drv))
source('~/R/R_Data_Analysis/ggplot_Visualization.R')
# Bar Charts
diamonds
str(diamonds)
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut))
ggplot(data=diamonds)+stat_count(mapping=aes(x=cut))
# count is the default value for the stat
?geom_bar
ggplot(data=diamonds)+geom_col(mapping=aes(x=cut,y=clarity))
ggplot(data=diamonds)+geom_col(mapping=aes(x=cut))
ggplot(data=diamonds)+geom_col(mapping=aes(x=cut,y=y))
ggplot(data=diamonds)+geom_col(mapping=aes(x=cut,y=price))
demo <- tribble( ~a, ~b,
"bar_1", 20,
"bar_2", 30,
"bar_3", 40)
demo
ggplot(data=demo)+geom_col(mapping=aes(x=a,y=b,color='identity'))
# Bar Charts
diamonds
ggplot(data=demo)+geom_col(mapping=aes(x=a,y=b),stat='identity')
ggplot(data=demo)+geom_col(mapping=aes(x=a,y=b),stat='identity')
# for presenting the raw values of x with y use stat='identity'
ggplot(data=demo)+geom_bar(mapping=aes(x=a,y=b),stat='identity')
# for presenting the raw values of x with y use stat='identity'
ggplot(data=demo)+geom_bar(mapping=aes(x=a,y=b))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,gropu=1))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,grop=1))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,group=1))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,group=0))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,group=5))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,group=10))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,y=..prop..,group=0.5))
? group
? geom_bar
ggplot(data=diamonds)+stat_sumary(mapping=aes(x=cut,y=depth),fun.min=min,fun.max=max,fun.y=median)
ggplot(data=diamonds)+stat_summary(mapping=aes(x=cut,y=depth),fun.min=min,fun.max=max,fun.y=median)
ggplot(data=diamonds)+stat_summary(mapping=aes(x=cut,y=depth),fun.ymin=min,fun.ymax=max,fun.y=median)
?stat_summary
ggplot(data=diamonds)+geom_freqpoly(mapping=aes(x=cut))
ggplot(data=diamonds)+geom_histogram(mapping=aes(x=cut))
ggplot(data=diamonds)+geom_freqpoly(mapping=aes(x=cut,y=depth))
ggplot(data=diamonds)+geom_histogram(mapping=aes(x=cut,y=depth))
?stat_smooth
ggplot(data = diamonds) +
geom_bar(mapping = aes(x = cut, y = ..prop..))
ggplot(data = diamonds) +
geom_bar(
mapping = aes(x = cut, fill = color, y = ..prop..)
)
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,color=cut))
# fill is used to color the bar
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=cut))
summary(diamonds)
# for a stacked bar chart
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity),aplha=1/5,position='identity')
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,aplha=1/5,position='identity'))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,alpha=1/5,position='identity'))
# count is the default value for the geom_bar where as geo_col uses stat_identity as the default
# Geom_col represent the values instead of count
?geom_bar
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,alpha=1/5,position = "identity"))
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,alpha=1/5),position = "identity")
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,),position = "identity")
# position = "identity" will place each object exactly where it falls in the context of the graph.
# This is not very useful for bars, because it overlaps them.
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity,alpha=1/5),position = "identity")
ggplot(
data = diamonds,
mapping = aes(x = cut, color = clarity)
) +
geom_bar(fill = NA, position = "identity")
# position = "fill" works like stacking, but makes each set of stacked bars the same height.
# This makes it easier to compare proportions across groups:
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity),position='fill')
# position = "dodge" places overlapping objects directly beside one another.
# This makes it easier to compare individual values:
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity),position='dodge')
# position = "jitter" adds a small amount of random noise to each point.
# This is useful where two data points overlaps because those 2 points are not likely to get same random noise.
ggplot(data=diamonds)+geom_bar(mapping=aes(x=cut,fill=clarity),position='jitter')
# position = "jitter" adds a small amount of random noise to each point.
# This is useful where two data points overlaps because those 2 points are not likely to get same random noise.
ggplot(data=mpg)+geom_bar(mapping=aes(x=dipl,y=hwy),position='jitter')
# position = "jitter" adds a small amount of random noise to each point.
# This is useful where two data points overlaps because those 2 points are not likely to get same random noise.
ggplot(data=mpg)+geom_bar(mapping=aes(x=displ,y=hwy),position='jitter')
# position = "jitter" adds a small amount of random noise to each point.
# This is useful where two data points overlaps because those 2 points are not likely to get same random noise.
ggplot(data=mpg)+geom_point(mapping=aes(x=displ,y=hwy),position='jitter')
ggplot(data=mpg)+geom_jitter(mapping=aes(x=displ,y=hwy))
?geom_jitter
# Co-ordinate Systems
ggplot(data = mpg, mapping = aes(x = class, y = hwy))+
geom_boxplot()
ggplot(data = mpg, mapping = aes(x = class, y = hwy))+
geom_boxplot()+coord_flip()
?geom_boxplot
nz=map_data('ind')
install.packages("maps")
library(maps)
nz=map_data('ind')
nz=map_data('india')
nz=map_data('nz')
nz=map_data('in')
?maps
?map.cities
nz=map_data('aus')
nz=map_data('us')
nz=get_map('india')
nz=get_map('India')
nz=map_data('Ind')
nz=map_data('Ind')
nz=map_data('nz')
str(nz)
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,fill='white',color='balck'))
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,color='balck'))
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,fill='white',color='balck',group=group))
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,color='balck',group=group),fill='white')
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,color='black',group=group),fill='white')
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,group=group),fill='white',color='black')
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,group=group),fill='white',color='black')+
geom_quickmap()
ggplot(data=nz)+geom_polygon(aes(x=long,y=lat,group=group),fill='white',color='black')+
coord_quickmap()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),theme(aspect.ratio=1),labs(NULL,NULL))+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut))+theme(aspect.ratio=1)+labs(NULL,NULL)+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut))+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=5)+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=0.5)+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_fixed()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_flip()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+theme(aspect.ratio=5)+labs(x=NULL,y=NULL)+
coord_flip()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_flip()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+
theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coordpolar()
ggplot(data=diamonds)+
geom_bar(mapping=aes(x=cut,fill=cut),show.legend = FALSE,width=1)+
theme(aspect.ratio=1)+labs(x=NULL,y=NULL)+
coord_polar()
library(tidyverse)
library(nycflights13)
install.packages("nycflights13")
library(nycflights13)
nycflights13
nycflights13::flights
str(flights)
filter(flights,month==7,day==28)
july28 <- filter(flights,month==7,day==28)
july28
# Using assignment operators
filter(flights,month==7&day==28)
sqrt(2) ^ 2 == 2
near(sqrt(2)^2,2)
# Filtering flights of 11 and 12 months both
filter(flights,month==11 | month==12)
# This is same as
filter(flights, month %in% c(11,12))
filter(flights, !(arr_delay>120 | dep_delay>120))
df <- tibble(x = c(1, NA, 3))
filter(df, x > 1)
filter(df,is.na(x) | x>1)
str(flights)
filter(flights, dest=='IAH')
filter(flights,between(time_hour,'00:00:00','06:00:00'))
str(flights)
?between
filter(flights,time_hour>='00:00:00' & time_hour<='06:00:00')
filter(flights,dep_time==2400 | dep_time<=600)
filter(flights,dep_time<=600)
summary(flights)
# Arranging the data with arrange()
arrange(flights,year,month,day)
# Arranging the data with arrange()
arrange(flights,dep_time,month,day)
# Arranging the data with arrange()
arrange(flights,desc(dep_time,month,day))
arrange(flights,dec(air_delay))
arrange(flights,desc(air_delay))
arrange(flights,desc(arr_delay))
# Missing values are always sorted at the end irrespective of the order
df <- tibble(x = c(5, 2, NA))
arrange(df, x)
arrange(df, desc(x))
? arrange
# arranging NA vlaues at the start
arrange(flights,is.na(air_time))
# arranging NA vlaues at the start
arrange(flights,dec(is.na(air_time)))
# arranging NA vlaues at the start
arrange(flights,desc(is.na(air_time)))
arrange(flights,-(is.na(air_time)))
arrange(flights,desc(distance))
# selecting columns or variables with select()
select(flights,year,month,day)
select(flights,year:dep_time)
select(flights,-year)
?select
# renaming the column name
rename(flights,tail_num=tailnum)
select(flights,dep_time,arr_delay,everything())
select(flights,dep_time,dep_time,arr_delay,everything())
select(flights,one(one_of(flights)))
select(flights,one_of(flights))
select(flights, contains("TIME"))
select(flights, contains("TIME",ignore.case=FALSE))
select(flights, contains("time",ignore.case=FALSE))
mutate(flights_sml,gain=arr_delay-dep_delay,speed=distance/air_time*60)
# Adding new variables using mutate()
# We can add new variable which are the functions of the existing variables
flights_sml <- select(flights, year:day, ends_with("delay"),distance, air_time)
mutate(flights_sml,gain=arr_delay-dep_delay,speed=distance/air_time*60)
# %/% for getting the dividing factor and %% for remainder
transmute(flights, dep_time, hour = dep_time %/% 100,minute = dep_time %% 100)
x <- c(1:10)
lead(x)
# lagging value
lag(x)
# R provides functions for running sums, products, mins, and maxes: cumsum(), cumprod(), cummin(), cummax().
# dplyr also provides cummean() for cumulative means.
cummean(x)
cumsum(x)
min_rank(x)
min_rank(y)
y <- c(1, 2, 2, NA, 3, 4)
min_rank(y)
row_number(y)
?row_number
dense_rank(y)
percent_rank(y)
cume_dist(y)
# Ranks element with the normalization by subtracting min value from every element and then divide by the new max value
# Rank range of all liies b/w 0 and 1 where minimum value has 0 and maximum has 1
#y Duplicates have same rank
percent_rank(y)
y
?perecent_rank
?percent_rank
str(flights)
transmutate(flights,dt_hr=dep_time%/%100,dt_min=dep_time%%100,sdt_hr=sched_dep_time%/%100,sdt_min=sched_dep_time%%100)
transmute(flights,dt_hr=dep_time%/%100,dt_min=dep_time%%100,sdt_hr=sched_dep_time%/%100,sdt_min=sched_dep_time%%100)
# Summarize() for getting values groupby
summarize(group_by(flights,year,month,day),delay=mean(dep_delay,na.rm=TRUE))
# Summarize() for getting values groupby
# Average delayfor every day of the year
summarize(group_by(flights,year,month,day),count=n(),delay=mean(dep_delay,na.rm=TRUE))
filter(delay,count>1000)
# Summarize() for getting values groupby
# Average delayfor every day of the year
# Count=n() for the count of total values or flights on that day
delay=summarize(group_by(flights,year,month,day),count=n(),delay=mean(dep_delay,na.rm=TRUE))
filter(delay,count>1000)
by_dest <- group_by(flights, dest)
delay <- summarize(by_dest,count = n(),dist = mean(distance, na.rm = TRUE),
delay = mean(arr_delay, na.rm = TRUE))
delay <- filter(delay, count > 20, dest != "HNL")
delay
ggplot(data = delay, mapping = aes(x = dist, y = delay)) +
geom_point(aes(size = count), alpha = 1/3) +
geom_smooth(se = FALSE)
# The upper full code we can write in a compact way using pipe
delay <- flights %>% group_by(dest) %>%
summarize(count=n(),dist=mean(distance,na.rm=TRUE),delay=mean(arr_delay,na.rm=TRUE)) %>%
filter(count>20,dest!='HNL')
delay
source('~/R/R_Data_Analysis/dplyr_analysis.R')
not_cancelled %<% group_by(year,month,day) %<%
summarize(mean(dep_time))
not_cancelled %>% group_by(year,month,day) %>%
summarize(mean(dep_time))
not_cancelled <- flights %>%
filter(!is.na(dep_delay),!is.na(arr_delay))
not_cancelled %>% group_by(year,month,day) %>%
summarize(mean(dep_time))
not_cancelled %>% group_by(year,month,day) %>%
summarize(mean=mean(dep_time))
not_cancelled <- flights %>%
filter(!is.na(dep_delay),!is.na(arr_delay))
not_cancelled %>% group_by(year,month,day) %>%
summarize(mean=mean(dep_delay))
delays=not_cancelled %>% group_by(tailnum) %>% summarize(mean=mean(dep_delay))
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delays))
delays=not_cancelled %>% group_by(tailnum) %>% summarize(delay=mean(arr_delay))
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delay))
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delay),binwidth=10)
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delay),binwidth=50)
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delay),binwidth=30)
ggplot(data=delays)+geom_freqpoly(mapping=aes(x=delay),binwidth=10)
delays=not_cancelled %>% group_by(tailnum) %>% summarize(delay=mean(arr_delay),na.rm=TRUE)
ggplot(data=delays)+geom_point(mapping=aes(x=delay,y=count),alpha=1/10)
delays=not_cancelled %>% group_by(tailnum) %>% summarize(delay=mean(arr_delay),count=n(),na.rm=TRUE)
ggplot(data=delays)+geom_point(mapping=aes(x=delay,y=count),alpha=1/10)
# Neglecting the first first 25 counts
delays %>% filter(count>25) %>% ggplot(mapping=aes(x=delay,y=count))+
geom_point(alpha=1/10)
batting <- as_tibble(Lahman::Batting)
install.packages("Lahman")
batting <- as_tibble(Lahman::Batting)
install.packages("Lahman")
batting <- as_tibble(Lahman::Batting)
batters=batting %>% group_by(playerID) %>%
summarize(ba=sum(H,na.rm=TRUE)/sum(AB,na.rm=TRUE),ab=sum(AB,na.rm=TRUE))
batters
batters %>% filter(ab>25) %>% ggplot(mapping=aes(x=ab,y=ba))+
geom_point() + geom_smooth()
batters %>% filter(ab>25) %>% ggplot(mapping=aes(x=ab,y=ba))+
geom_point() + geom_smooth(se=FALSE)
not_cancelled %>% group_by(year,month,day) %>%
summarize(avg_delay1=mean(arr_delay),avg_delay2=mean(arr_delay[arr_delay>0]))
not_cancelled %>% group_by(dest) %>%
summarize(sd=sd(distance)) %>% arrange(desc(sd))
not_cancelled %>% group_by(year, month, day) %>%
summarize(first = min(dep_time),last = max(dep_time))
# We can also use first() and last() at the place of min and max
not_cancelled %>%group_by(year, month, day) %>%
summarize(first_dep = first(dep_time),last_dep = last(dep_time))
not_cancelled %>%group_by(year, month, day) %>%
mutate(r = min_rank(desc(dep_time))) %>%filter(r %in% range(r))
not_cancelled %>% group_by(dest) %>%
summarize(carriers=n_distinct(carrier)) %>% arrange(desc(carriers))
not_cancelled$carrier
not_cancelled %>% count(dest)
not_cancelled %>% count(tailnum, wt = distance)
ot_cancelled %>% group_by(year, month, day) %>%
summarize(n_early = sum(dep_time < 500))
not_cancelled %>% group_by(year, month, day) %>%
summarize(n_early = sum(dep_time < 500))
# What proportion of flights are delayed by more than an hour?
not_cancelled %>% group_by(year, month, day) %>%
summarize(hour_perc = mean(arr_delay > 60))
daily <- group_by(flights, year, month, day)
# daily no. of flights
(per_day <- summarize(daily, flights = n()))
(per_month <- summarize(per_day, flights = sum(flights)))
# Yearly no. of flights
(per_year <- summarize(per_month, flights = sum(flights)))
daily %>% ungroup() %>%
summarize(flights = n())
daily <- group_by(flights, year, month, day)
daily
popular_dests <- flights %>%group_by(dest) %>%
filter(n() > 365)
popular_dests
popular_dests <- flights %>% group_by(dest) %>%
filter(n() > 365)
popular_dests
popular_dests %>% filter(arr_delay > 0) %>%
mutate(prop_delay = arr_delay / sum(arr_delay)) %>%
select(year:day, dest, arr_delay, prop_delay)
library(tidyverse)
library(nycflights13)
nycflights13::flights
str(flights)
diamonds
str(diamonds)
str(mpg)
# Categorical
ggplot(data = diamonds) + geom_bar(mapping = aes(x = cut))
diamonds %>%count(cut)
# Continuous
ggplot(data = diamonds) + geom_histogram(mapping = aes(x = carat), binwidth = 0.5)
diamonds
str(diamonds)
diamonds %>% count(cut_width(carat, 0.5))
smaller <- diamonds %>%filter(carat < 3)
ggplot(data = smaller, mapping = aes(x = carat)) +geom_histogram(binwidth = 0.1)
ggplot(data = smaller, mapping = aes(x = carat, color = cut)) +geom_freqpoly(binwidth = 0.1)
ggplot(data = smaller, mapping = aes(x = carat)) +geom_histogram(binwidth = 0.01)
faithful
ggplot(data = faithful, mapping = aes(x = eruptions)) +geom_histogram(binwidth = 0.25)
ggplot(diamonds) + geom_histogram(mapping = aes(x = y), binwidth = 0.5)
# Zoom on y-axis to see outliers
ggplot(diamonds) + geom_histogram(mapping = aes(x = y), binwidth = 0.5) +
coord_cartesian(ylim = c(0, 50))
unusual <- diamonds %>% filter(y < 3 | y > 20) %>% arrange(y)
unsual
unusual
diamonds2 <- diamonds %>% filter(between(y, 3, 20))
ggplot(diamonds) + geom_histogram(mapping = aes(x = y), binwidth = 0.5)
# Zoom on y-axis to see outliers using coord_cartesian
ggplot(diamonds) + geom_histogram(mapping = aes(x = y), binwidth = 0.5) +
coord_cartesian(ylim = c(0, 50))
unusual <- diamonds %>% filter(y < 3 | y > 20) %>% arrange(y)
unusual
diamonds2 <- diamonds %>% filter(between(y, 3, 20))
diamonds2 <- diamonds %>%  mutate(y = ifelse(y < 3 | y > 20, NA, y))
ggplot(data = diamonds2, mapping = aes(x = x, y = y)) + geom_point()
# we can also use the following to avoid warning
ggplot(data = diamonds2, mapping = aes(x = x, y = y)) +
geom_point(na.rm = TRUE)
nycflights13::flights %>%  mutate(cancelled = is.na(dep_time),sched_hour = sched_dep_time %/% 100,
sched_min = sched_dep_time %% 100,sched_dep_time = sched_hour + sched_min / 60) %>%
ggplot(mapping = aes(sched_dep_time)) +
geom_freqpoly( mapping = aes(color = cancelled),binwidth = 1/4 )
ggplot(data = diamonds, mapping = aes(x = price)) +
geom_freqpoly(mapping = aes(color = cut), binwidth = 500)
ggplot( data = diamonds, mapping = aes(x = price, y = ..density..)) +
geom_freqpoly(mapping = aes(color = cut), binwidth = 500)
str(diamonds)
# Box plot is a better graph to interpret
ggplot(data = diamonds, mapping = aes(x = cut, y = price)) +
geom_boxplot()
ggplot(data = mpg, mapping = aes(x = class, y = hwy)) +
geom_boxplot()
# Flipping the axis
ggplot(data = mpg) +geom_boxplot(mapping = aes(x = reorder(class, hwy, FUN = median),y = hwy))
ggplot(data = diamonds) +
geom_count(mapping = aes(x = cut, y = color))
diamonds %>% count(color, cut) %>%
ggplot(mapping = aes(x = color, y = cut)) +
geom_tile(mapping = aes(fill = n))
# Using geom_tile which is a kind of heatmap
diamonds %>% count(color, cut) %>%
ggplot(mapping = aes(x = color, y = cut)) +
geom_tile(mapping = aes(fill = n))
